{"ast":null,"code":"import { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { createRouter, createWebHistory } from \"vue-router\";\nconst router = createRouter({\n  history: createWebHistory(),\n  routes: [{\n    path: \"/\",\n    component: () => import(\"../views/HomePage.vue\")\n  }, {\n    path: \"/register\",\n    component: () => import(\"../views/RegisterPage.vue\")\n  }, {\n    path: \"/sign-in\",\n    component: () => import(\"../views/SignIn.vue\")\n  }, {\n    path: \"/feed\",\n    component: () => import(\"../views/FeedPage.vue\"),\n    meta: {\n      requiresAuth: true\n    }\n  }]\n});\nconst getCurrentUser = () => {\n  return new Promise((resolve, reject) => {\n    const removeListener = onAuthStateChanged(getAuth(), user => {\n      removeListener();\n      resolve(user);\n    }, reject);\n  });\n};\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (getAuth().currentUser) {\n      next();\n    } else {\n      alert(\"No tienes acceso\");\n      next(\"/\");\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["getAuth","onAuthStateChanged","createRouter","createWebHistory","router","history","routes","path","component","meta","requiresAuth","getCurrentUser","Promise","resolve","reject","removeListener","user","beforeEach","to","from","next","matched","some","record","currentUser","alert"],"sources":["C:/Users/jorda/authfire/src/router/index.js"],"sourcesContent":["import { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport { createRouter, createWebHistory } from \"vue-router\";\r\n\r\nconst router = createRouter({\r\n    history: createWebHistory(),\r\n    routes : [\r\n        { path: \"/\", component: () => import(\"../views/HomePage.vue\")},\r\n        { path: \"/register\", component: () => import(\"../views/RegisterPage.vue\")},\r\n        { path: \"/sign-in\", component: () => import(\"../views/SignIn.vue\")},\r\n        { \r\n            path: \"/feed\", \r\n            component: () => import(\"../views/FeedPage.vue\"),\r\n            meta: {\r\n                requiresAuth: true,\r\n            }\r\n        },\r\n    ],\r\n});\r\n\r\nconst getCurrentUser = () => {\r\n    return new Promise((resolve, reject) => {\r\n        const removeListener = onAuthStateChanged(\r\n            getAuth(),\r\n            (user) => {\r\n                removeListener();\r\n                resolve(user);\r\n            },\r\n\r\n            reject\r\n        );\r\n    });\r\n};\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    if(to.matched.some((record) => record.meta.requiresAuth)){\r\n        if(getAuth().currentUser){\r\n            next();\r\n        } else {\r\n            alert(\"No tienes acceso\");\r\n            next(\"/\");\r\n        }\r\n    } else {\r\n        next();\r\n    }\r\n});\r\n\r\nexport default router;"],"mappings":"AAAA,SAASA,OAAO,EAAEC,kBAAkB,QAAQ,eAAe;AAC3D,SAASC,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAE3D,MAAMC,MAAM,GAAGF,YAAY,CAAC;EACxBG,OAAO,EAAEF,gBAAgB,CAAC,CAAC;EAC3BG,MAAM,EAAG,CACL;IAAEC,IAAI,EAAE,GAAG;IAAEC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,uBAAuB;EAAC,CAAC,EAC9D;IAAED,IAAI,EAAE,WAAW;IAAEC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B;EAAC,CAAC,EAC1E;IAAED,IAAI,EAAE,UAAU;IAAEC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,qBAAqB;EAAC,CAAC,EACnE;IACID,IAAI,EAAE,OAAO;IACbC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,uBAAuB,CAAC;IAChDC,IAAI,EAAE;MACFC,YAAY,EAAE;IAClB;EACJ,CAAC;AAET,CAAC,CAAC;AAEF,MAAMC,cAAc,GAAGA,CAAA,KAAM;EACzB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAMC,cAAc,GAAGd,kBAAkB,CACrCD,OAAO,CAAC,CAAC,EACRgB,IAAI,IAAK;MACND,cAAc,CAAC,CAAC;MAChBF,OAAO,CAACG,IAAI,CAAC;IACjB,CAAC,EAEDF,MACJ,CAAC;EACL,CAAC,CAAC;AACN,CAAC;AAEDV,MAAM,CAACa,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAClC,IAAGF,EAAE,CAACG,OAAO,CAACC,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACd,IAAI,CAACC,YAAY,CAAC,EAAC;IACrD,IAAGV,OAAO,CAAC,CAAC,CAACwB,WAAW,EAAC;MACrBJ,IAAI,CAAC,CAAC;IACV,CAAC,MAAM;MACHK,KAAK,CAAC,kBAAkB,CAAC;MACzBL,IAAI,CAAC,GAAG,CAAC;IACb;EACJ,CAAC,MAAM;IACHA,IAAI,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;AAEF,eAAehB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}