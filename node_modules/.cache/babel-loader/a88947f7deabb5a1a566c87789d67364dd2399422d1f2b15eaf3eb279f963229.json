{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/maylo/OneDrive/Escritorio/novo-front 1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"C:/Users/maylo/OneDrive/Escritorio/novo-front 1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"C:/Users/maylo/OneDrive/Escritorio/novo-front 1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { getFirestore, collection, addDoc, getDocs, query, where } from 'firebase/firestore';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { app } from '../firebase';\nvar db = getFirestore(app);\nvar storage = getStorage(app);\nexport var productService = {\n  createProduct: function createProduct(productData, imageFile) {\n    return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var imageUrl, storageRef, docRef;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            imageUrl = ''; // Subir imagen si existe\n            if (!imageFile) {\n              _context.next = 9;\n              break;\n            }\n            storageRef = ref(storage, \"products/\".concat(Date.now(), \"_\").concat(imageFile.name));\n            _context.next = 6;\n            return uploadBytes(storageRef, imageFile);\n          case 6:\n            _context.next = 8;\n            return getDownloadURL(storageRef);\n          case 8:\n            imageUrl = _context.sent;\n          case 9:\n            _context.next = 11;\n            return addDoc(collection(db, 'products'), _objectSpread(_objectSpread({}, productData), {}, {\n              image_url: imageUrl,\n              created_at: new Date(),\n              user_id: productData.userId\n            }));\n          case 11:\n            docRef = _context.sent;\n            return _context.abrupt(\"return\", _objectSpread(_objectSpread({\n              id: docRef.id\n            }, productData), {}, {\n              image_url: imageUrl\n            }));\n          case 15:\n            _context.prev = 15;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('Error al crear producto:', _context.t0);\n            throw _context.t0;\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 15]]);\n    }))();\n  },\n  getProducts: function getProducts() {\n    var _arguments = arguments;\n    return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var filters, q, querySnapshot, products;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            filters = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : {};\n            _context2.prev = 1;\n            q = collection(db, 'products'); // Aplicar filtros\n            if (filters.category) {\n              q = query(q, where('category', '==', filters.category));\n            }\n            if (filters.condition) {\n              q = query(q, where('condition_state', '==', filters.condition));\n            }\n            _context2.next = 7;\n            return getDocs(q);\n          case 7:\n            querySnapshot = _context2.sent;\n            products = [];\n            querySnapshot.forEach(function (doc) {\n              products.push(_objectSpread({\n                id: doc.id\n              }, doc.data()));\n            });\n\n            // Filtrar por precio\n            if (filters.minPrice) {\n              products = products.filter(function (product) {\n                return parseInt(product.price) >= parseInt(filters.minPrice);\n              });\n            }\n            if (filters.maxPrice) {\n              products = products.filter(function (product) {\n                return parseInt(product.price) <= parseInt(filters.maxPrice);\n              });\n            }\n            return _context2.abrupt(\"return\", products);\n          case 15:\n            _context2.prev = 15;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.error('Error al obtener productos:', _context2.t0);\n            throw _context2.t0;\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[1, 15]]);\n    }))();\n  }\n};","map":{"version":3,"names":["getFirestore","collection","addDoc","getDocs","query","where","getStorage","ref","uploadBytes","getDownloadURL","app","db","storage","productService","createProduct","productData","imageFile","_asyncToGenerator","_regeneratorRuntime","mark","_callee","imageUrl","storageRef","docRef","wrap","_callee$","_context","prev","next","concat","Date","now","name","sent","_objectSpread","image_url","created_at","user_id","userId","abrupt","id","t0","console","error","stop","getProducts","_arguments","arguments","_callee2","filters","q","querySnapshot","products","_callee2$","_context2","length","undefined","category","condition","forEach","doc","push","data","minPrice","filter","product","parseInt","price","maxPrice"],"sources":["C:/Users/maylo/OneDrive/Escritorio/novo-front 1/src/services/products.js"],"sourcesContent":["import { \r\n  getFirestore, \r\n  collection, \r\n  addDoc, \r\n  getDocs,\r\n  query,\r\n  where\r\n} from 'firebase/firestore'\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage'\r\nimport { app } from '../firebase'\r\n\r\nconst db = getFirestore(app)\r\nconst storage = getStorage(app)\r\n\r\nexport const productService = {\r\n  async createProduct(productData, imageFile) {\r\n    try {\r\n      let imageUrl = ''\r\n      \r\n      // Subir imagen si existe\r\n      if (imageFile) {\r\n        const storageRef = ref(storage, `products/${Date.now()}_${imageFile.name}`)\r\n        await uploadBytes(storageRef, imageFile)\r\n        imageUrl = await getDownloadURL(storageRef)\r\n      }\r\n\r\n      // Crear el producto en Firestore\r\n      const docRef = await addDoc(collection(db, 'products'), {\r\n        ...productData,\r\n        image_url: imageUrl,\r\n        created_at: new Date(),\r\n        user_id: productData.userId\r\n      })\r\n\r\n      return {\r\n        id: docRef.id,\r\n        ...productData,\r\n        image_url: imageUrl\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al crear producto:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  async getProducts(filters = {}) {\r\n    try {\r\n      let q = collection(db, 'products')\r\n      \r\n      // Aplicar filtros\r\n      if (filters.category) {\r\n        q = query(q, where('category', '==', filters.category))\r\n      }\r\n      if (filters.condition) {\r\n        q = query(q, where('condition_state', '==', filters.condition))\r\n      }\r\n      \r\n      const querySnapshot = await getDocs(q)\r\n      let products = []\r\n      \r\n      querySnapshot.forEach((doc) => {\r\n        products.push({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        })\r\n      })\r\n\r\n      // Filtrar por precio\r\n      if (filters.minPrice) {\r\n        products = products.filter(product => \r\n          parseInt(product.price) >= parseInt(filters.minPrice)\r\n        )\r\n      }\r\n      if (filters.maxPrice) {\r\n        products = products.filter(product => \r\n          parseInt(product.price) <= parseInt(filters.maxPrice)\r\n        )\r\n      }\r\n\r\n      return products\r\n    } catch (error) {\r\n      console.error('Error al obtener productos:', error)\r\n      throw error\r\n    }\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}