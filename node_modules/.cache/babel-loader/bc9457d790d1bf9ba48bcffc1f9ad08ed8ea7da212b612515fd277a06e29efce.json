{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/maylo/OneDrive/Escritorio/novo-front 1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"C:/Users/maylo/OneDrive/Escritorio/novo-front 1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"C:/Users/maylo/OneDrive/Escritorio/novo-front 1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { productService } from '@/services/products';\nimport { authService } from '@/services/auth';\nexport default {\n  __name: 'CrearProducto',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var router = useRouter();\n    var loading = ref(false);\n    var imageFile = ref(null);\n    var product = ref({\n      title: '',\n      description: '',\n      price: '',\n      category: '',\n      condition_state: ''\n    });\n    var handleImageChange = function handleImageChange(event) {\n      imageFile.value = event.target.files[0];\n    };\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var currentUser, productData;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              loading.value = true;\n              _context.prev = 1;\n              currentUser = authService.getCurrentUser();\n              if (currentUser) {\n                _context.next = 5;\n                break;\n              }\n              throw new Error('Debes iniciar sesión para publicar');\n            case 5:\n              productData = _objectSpread(_objectSpread({}, product.value), {}, {\n                userId: currentUser.uid\n              });\n              _context.next = 8;\n              return productService.createProduct(productData, imageFile.value);\n            case 8:\n              router.push('/app/productos');\n              _context.next = 15;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('Error al crear producto:', _context.t0);\n              alert(_context.t0.message);\n            case 15:\n              _context.prev = 15;\n              loading.value = false;\n              return _context.finish(15);\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 11, 15, 18]]);\n      }));\n      return function handleSubmit() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var __returned__ = {\n      router: router,\n      loading: loading,\n      imageFile: imageFile,\n      product: product,\n      handleImageChange: handleImageChange,\n      handleSubmit: handleSubmit,\n      ref: ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get productService() {\n        return productService;\n      },\n      get authService() {\n        return authService;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","productService","authService","router","loading","imageFile","product","title","description","price","category","condition_state","handleImageChange","event","value","target","files","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentUser","productData","wrap","_callee$","_context","prev","next","getCurrentUser","Error","_objectSpread","userId","uid","createProduct","push","t0","console","error","alert","message","finish","stop","apply","arguments"],"sources":["C:/Users/maylo/OneDrive/Escritorio/novo-front 1/src/views/CrearProducto.vue"],"sourcesContent":["<template>\r\n  <div class=\"create-product\">\r\n    <div class=\"container\">\r\n      <h1>Publicar Producto</h1>\r\n      \r\n      <form @submit.prevent=\"handleSubmit\" class=\"product-form\">\r\n        <div class=\"form-group\">\r\n          <label>Título</label>\r\n          <input \r\n            v-model=\"product.title\" \r\n            type=\"text\" \r\n            required\r\n            placeholder=\"Nombre del producto\"\r\n          >\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Descripción</label>\r\n          <textarea \r\n            v-model=\"product.description\" \r\n            required\r\n            placeholder=\"Describe tu producto\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Precio</label>\r\n          <input \r\n            v-model=\"product.price\" \r\n            type=\"number\" \r\n            required\r\n            min=\"0\"\r\n            placeholder=\"Precio en pesos\"\r\n          >\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Categoría</label>\r\n          <select v-model=\"product.category\" required>\r\n            <option value=\"\">Selecciona una categoría</option>\r\n            <option value=\"libros\">Libros</option>\r\n            <option value=\"notas\">Notas y Apuntes</option>\r\n            <option value=\"electronicos\">Electrónicos</option>\r\n            <option value=\"suministros\">Suministros</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Condición</label>\r\n          <select v-model=\"product.condition_state\" required>\r\n            <option value=\"\">Selecciona la condición</option>\r\n            <option value=\"Nuevo\">Nuevo</option>\r\n            <option value=\"Semi-nuevo\">Semi-nuevo</option>\r\n            <option value=\"Usado\">Usado</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Imagen del producto</label>\r\n          <input \r\n            type=\"file\" \r\n            @change=\"handleImageChange\" \r\n            accept=\"image/*\"\r\n            required\r\n          >\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"submit-button\" :disabled=\"loading\">\r\n          {{ loading ? 'Publicando...' : 'Publicar Producto' }}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { productService } from '@/services/products'\r\nimport { authService } from '@/services/auth'\r\n\r\nconst router = useRouter()\r\nconst loading = ref(false)\r\nconst imageFile = ref(null)\r\n\r\nconst product = ref({\r\n  title: '',\r\n  description: '',\r\n  price: '',\r\n  category: '',\r\n  condition_state: '',\r\n})\r\n\r\nconst handleImageChange = (event) => {\r\n  imageFile.value = event.target.files[0]\r\n}\r\n\r\nconst handleSubmit = async () => {\r\n  loading.value = true\r\n  \r\n  try {\r\n    const currentUser = authService.getCurrentUser()\r\n    if (!currentUser) {\r\n      throw new Error('Debes iniciar sesión para publicar')\r\n    }\r\n\r\n    const productData = {\r\n      ...product.value,\r\n      userId: currentUser.uid\r\n    }\r\n\r\n    await productService.createProduct(productData, imageFile.value)\r\n    router.push('/app/productos')\r\n  } catch (error) {\r\n    console.error('Error al crear producto:', error)\r\n    alert(error.message)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.create-product {\r\n  padding: 2rem 0;\r\n  background-color: #f8f9fa;\r\n  min-height: 100vh;\r\n}\r\n\r\n.container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 0 1rem;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n  color: #1f2937;\r\n}\r\n\r\n.product-form {\r\n  background-color: white;\r\n  padding: 2rem;\r\n  border-radius: 1rem;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  color: #4b5563;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group input,\r\n.form-group textarea,\r\n.form-group select {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 0.5rem;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-group textarea {\r\n  height: 150px;\r\n  resize: vertical;\r\n}\r\n\r\n.submit-button {\r\n  width: 100%;\r\n  padding: 1rem;\r\n  background-color: #2563eb;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 0.5rem;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.submit-button:hover:not(:disabled) {\r\n  background-color: #1d4ed8;\r\n}\r\n\r\n.submit-button:disabled {\r\n  opacity: 0.7;\r\n  cursor: not-allowed;\r\n}\r\n</style>"],"mappings":";;;;;;;AA4EA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,cAAc,QAAQ,qBAAqB;AACpD,SAASC,WAAW,QAAQ,iBAAiB;;;;;;IAE7C,IAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;IAC1B,IAAMI,OAAO,GAAGL,GAAG,CAAC,KAAK,CAAC;IAC1B,IAAMM,SAAS,GAAGN,GAAG,CAAC,IAAI,CAAC;IAE3B,IAAMO,OAAO,GAAGP,GAAG,CAAC;MAClBQ,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,eAAe,EAAE;IACnB,CAAC,CAAC;IAEF,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,KAAK,EAAK;MACnCR,SAAS,CAACS,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,IAAMC,YAAY;MAAA,IAAAC,KAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA;QAAA,IAAAC,WAAA,EAAAC,WAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACnBzB,OAAO,CAACU,KAAK,GAAG,IAAI;cAAAa,QAAA,CAAAC,IAAA;cAGZL,WAAW,GAAGrB,WAAW,CAAC4B,cAAc,CAAC,CAAC;cAAA,IAC3CP,WAAW;gBAAAI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,MACR,IAAIE,KAAK,CAAC,oCAAoC,CAAC;YAAA;cAGjDP,WAAW,GAAAQ,aAAA,CAAAA,aAAA,KACZ1B,OAAO,CAACQ,KAAK;gBAChBmB,MAAM,EAAEV,WAAW,CAACW;cAAG;cAAAP,QAAA,CAAAE,IAAA;cAAA,OAGnB5B,cAAc,CAACkC,aAAa,CAACX,WAAW,EAAEnB,SAAS,CAACS,KAAK,CAAC;YAAA;cAChEX,MAAM,CAACiC,IAAI,CAAC,gBAAgB,CAAC;cAAAT,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAU,EAAA,GAAAV,QAAA;cAE7BW,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAAZ,QAAA,CAAAU,EAAO,CAAC;cAChDG,KAAK,CAACb,QAAA,CAAAU,EAAA,CAAMI,OAAO,CAAC;YAAA;cAAAd,QAAA,CAAAC,IAAA;cAEpBxB,OAAO,CAACU,KAAK,GAAG,KAAK;cAAA,OAAAa,QAAA,CAAAe,MAAA;YAAA;YAAA;cAAA,OAAAf,QAAA,CAAAgB,IAAA;UAAA;QAAA,GAAArB,OAAA;MAAA,CAExB;MAAA,gBAtBKL,YAAYA,CAAA;QAAA,OAAAC,KAAA,CAAA0B,KAAA,OAAAC,SAAA;MAAA;IAAA,GAsBjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}